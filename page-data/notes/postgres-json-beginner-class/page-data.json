{"componentChunkName":"component---src-templates-blog-post-js","path":"/notes/postgres-json-beginner-class","result":{"data":{"markdownRemark":{"html":"<p>Operators see: <a href=\"https://www.postgresql.org/docs/9.5/functions-json.html\">https://www.postgresql.org/docs/9.5/functions-json.html</a></p>\n<h1>Create column using jsonb</h1>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> article <span class=\"token punctuation\">(</span>\n    id      UUID <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">,</span>\n    properties JSONB <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1>Insert values</h1>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> article\n<span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span>gen_random_uuid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'{\n  \"price\": 12.1,\n  \"name\": \"Kugelschreiber\",\n  \"tags\": {\n    \"manufacturer\": \"Siemens\",\n    \"discounted\": true\n  }\n}'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h1>Select value from JSON</h1>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span>\n  properties <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token string\">'price'</span>\n  properties <span class=\"token operator\">-</span><span class=\"token operator\">>></span> <span class=\"token string\">'price'</span>\n<span class=\"token keyword\">from</span> article</code></pre></div>\n<ul>\n<li><code class=\"language-text\">-></code> will extract the value as JSONB</li>\n<li><code class=\"language-text\">->></code> will extract the value as text</li>\n</ul>\n<h1>Compare values</h1>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span>\n<span class=\"token keyword\">FROM</span> article\n<span class=\"token keyword\">WHERE</span> CAST<span class=\"token punctuation\">(</span>properties <span class=\"token operator\">-</span><span class=\"token operator\">>></span> <span class=\"token string\">'price'</span> <span class=\"token keyword\">AS</span> <span class=\"token keyword\">NUMERIC</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">10</span></code></pre></div>\n<h1>Check where value is contained</h1>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span>\n<span class=\"token keyword\">FROM</span> article\n<span class=\"token keyword\">WHERE</span> properties <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token string\">'tags'</span> ? <span class=\"token string\">'discounted'</span></code></pre></div>\n<p>or</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span>\n<span class=\"token keyword\">FROM</span> article\n<span class=\"token keyword\">WHERE</span> jsonb_exists<span class=\"token punctuation\">(</span>properties <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token string\">'tags'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'discounted'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h1>Check where json is contained</h1>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span>\n<span class=\"token keyword\">FROM</span> article\n<span class=\"token keyword\">WHERE</span> properties <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token string\">'tags'</span> @<span class=\"token operator\">></span> <span class=\"token string\">'{\"manufacturer\": \"Siemens\"}'</span></code></pre></div>","excerpt":"Operators see: https://www.postgresql.org/docs/9.5/functions-json.html Create column using jsonb Insert values Select value from JSON  will extract the value asâ€¦","frontmatter":{"date":"10 July, 2021","path":"/notes/postgres-json-beginner-class","title":"Postgres JSON beginner Class"},"timeToRead":1}},"pageContext":{}},"staticQueryHashes":["3649515864","63159454"],"slicesMap":{}}