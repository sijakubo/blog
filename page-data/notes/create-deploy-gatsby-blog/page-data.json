{"componentChunkName":"component---src-templates-blog-post-js","path":"/notes/create-deploy-gatsby-blog","result":{"data":{"markdownRemark":{"html":"<p>Of course you would write the first blog post about creating the actual blog itself. So do I.</p>\n<h1>Create Gatsby blog</h1>\n<h2>Install Gatsby</h2>\n<p>First of all, we need to install <a href=\"https://www.gatsbyjs.com/\">Gatsby</a> which will generate the static blog pages</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ brew <span class=\"token function\">install</span> gatsby-cli</code></pre></div>\n<h2>Create a blog based on a Template</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ gatsby new <span class=\"token operator\">&lt;</span>name_of_the_blog<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>template_url<span class=\"token operator\">></span>\n//e.g.:\n$ gatsby new blog https://github.com/niklasmtj/gatsby-starter-julia</code></pre></div>\n<h2>Start the blog and customise it</h2>\n<p>The blog gets refreshed automatically when you save the files in your IDE</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ gatsby develop</code></pre></div>\n<h1>Add Version Control (GitHub)</h1>\n<p>When initializing the Gatsby project. An initial commit has been made with the base structure of the project. After the Adjustments and\nCustomization has been, add the project to VSC. In my example i'm unsing Github. So i created a Repository and added the remote of my\nproject to this location:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">git</span> remote <span class=\"token function\">add</span> origin https://github.com/sijakubo/info.git\n// check the remotes\n$ <span class=\"token function\">git</span> remote <span class=\"token parameter variable\">-v</span></code></pre></div>\n<p>After that, I pushed the changes to master</p>\n<h1>Add CI + Deployment to GitHub Pages</h1>\n<h2>Publish Configuration</h2>\n<p>We're going to add GitHub Actions to build the project and deploy the blog to GithubPages. To build an publish the changes to github pages,\nthere is a neat project for that:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> gh-pages --save-dev</code></pre></div>\n<p><code class=\"language-text\">gh-pages</code> needs the repository name in order to copy the public files to GitHub Pages. Therefore, add the following to\nyour <code class=\"language-text\">gatsby-config.js</code></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">pathPrefix</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/&lt;repository_name>\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then add a deploy script to your <code class=\"language-text\">package.json</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby build --prefix-paths &amp;&amp; gh-pages -d public\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Add Github Actions</h2>\n<p>In order to automate all the things, we are going to setup a CI process to publish the blog after we have pushed a change to the master\nbranch.</p>\n<p>Add the following workflow to your project at <code class=\"language-text\">&lt;project-root>/.github/workflows/node.js.yml</code></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Gatsby Publish\n\n<span class=\"token comment\"># Execute the Action on every master push</span>\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> master <span class=\"token punctuation\">]</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># checkout the latest master</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n      <span class=\"token comment\"># run: npm install</span>\n      <span class=\"token comment\"># run: npm run build -- --prefix-paths</span>\n      <span class=\"token comment\"># push the public files to the GitHub pages branch</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> enriikke/gatsby<span class=\"token punctuation\">-</span>gh<span class=\"token punctuation\">-</span>pages<span class=\"token punctuation\">-</span>action@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">access-token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.ACCESS_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">deploy-branch</span><span class=\"token punctuation\">:</span> gh<span class=\"token punctuation\">-</span>pages\n          <span class=\"token key atrule\">gatsby-args</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>prefix<span class=\"token punctuation\">-</span>paths</code></pre></div>\n<p>Please note, that this will require a <code class=\"language-text\">${{ secrets.ACCESS_TOKEN }}</code>. This Token can be generated in your GitHub Settings and needs to be\nwithin the GitHub Repository -> Settings -> Secrets. Otherwise, the build step will fail.</p>\n<h2>finished</h2>\n<p>That's about it. Your blog should now be available on GitHub Pages: <a href=\"https://sijakubo.github.io/info/\">https://sijakubo.github.io/info/</a></p>","excerpt":"Of course you would write the first blog post about creating the actual blog itself. So do I. Create Gatsby blog Install Gatsby First of all, we need to installâ€¦","frontmatter":{"date":"08 July, 2021","path":"/notes/create-deploy-gatsby-blog","title":"Creating a blog using Gatsby and host it on GitHub Pages in 15 Minutes for free"},"timeToRead":2}},"pageContext":{}},"staticQueryHashes":["3649515864","63159454"],"slicesMap":{}}